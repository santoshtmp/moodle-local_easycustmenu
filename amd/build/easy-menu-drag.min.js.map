{"version":3,"file":"easy-menu-drag.min.js","sources":["../src/easy-menu-drag.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AMD module\n *\n * @module     local_easycustmenu/easy-menu-drag\n * @copyright  2024 https://santoshmagar.com.np/\n * @author     santoshtmp7 https://github.com/santoshtmp/moodle-local_easycustmenu\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n */\ndefine(['jquery', 'core/sortable_list'], function ($, SortableList) {\n    /**\n     *\n     * @param {*} menu_type\n     */\n    function menu_drag(menu_type) {\n        new SortableList('.menu-draggable-list');\n        if (menu_type == 'navmenu') {\n            $('.menu-draggable-list > *').on(SortableList.EVENTS.DROP, function (evt, info) {\n                let element = info.element;\n                let input_itemdepth = element.find('input[name=\"itemdepth[]\"]');\n                let itemdepth = parseInt(element.attr('itemdepth'));\n                let end_x = info.endX;\n                let start_x = info.startX;\n                let prev_element = element.prev();\n                let prev_element_itemdepth = 1;\n                if (prev_element) {\n                    prev_element_itemdepth = parseInt(prev_element.attr('itemdepth'));\n                }\n                let menu_item = element.find('.menu-item');\n                // move to right; make child of inital menu\n                if (end_x > start_x && (end_x > (start_x + 25))) {\n                    let new_itemdepth = itemdepth + 1;\n                    if (new_itemdepth <= prev_element_itemdepth + 1) {\n                        element.attr('itemdepth', new_itemdepth);\n                        input_itemdepth.attr('value', new_itemdepth);\n                        let pix = 24 * new_itemdepth;\n                        menu_item.css({\n                            'padding-left': pix + 'px'\n                        });\n                    }\n\n                }\n                // move to left; make parent menu.\n                if (end_x < start_x && (end_x < (start_x - 25))) {\n                    let new_itemdepth = 1;\n                    if (itemdepth > 1) {\n                        new_itemdepth = itemdepth - 1;\n                    }\n                    element.attr('itemdepth', new_itemdepth);\n                    input_itemdepth.attr('value', new_itemdepth);\n                    let pix = 24 * new_itemdepth;\n                    menu_item.css({\n                        'padding-left': pix + 'px'\n                    });\n                }\n\n            });\n        }\n    }\n    //\n    return {\n        easy_menu_drag: function (menu_type) {\n            return menu_drag(menu_type);\n        }\n    };\n});"],"names":["define","$","SortableList","easy_menu_drag","menu_type","on","EVENTS","DROP","evt","info","element","input_itemdepth","find","itemdepth","parseInt","attr","end_x","endX","start_x","startX","prev_element","prev","prev_element_itemdepth","menu_item","new_itemdepth","pix","css","menu_drag"],"mappings":";;;;;;;;;AAwBAA,2CAAO,CAAC,SAAU,uBAAuB,SAAUC,EAAGC,oBAmD3C,CACHC,eAAgB,SAAUC,2BA/CXA,eACXF,aAAa,wBACA,WAAbE,WACAH,EAAE,4BAA4BI,GAAGH,aAAaI,OAAOC,MAAM,SAAUC,IAAKC,UAClEC,QAAUD,KAAKC,QACfC,gBAAkBD,QAAQE,KAAK,6BAC/BC,UAAYC,SAASJ,QAAQK,KAAK,cAClCC,MAAQP,KAAKQ,KACbC,QAAUT,KAAKU,OACfC,aAAeV,QAAQW,OACvBC,uBAAyB,EACzBF,eACAE,uBAAyBR,SAASM,aAAaL,KAAK,mBAEpDQ,UAAYb,QAAQE,KAAK,iBAEzBI,MAAQE,SAAYF,MAASE,QAAU,GAAM,KACzCM,cAAgBX,UAAY,KAC5BW,eAAiBF,uBAAyB,EAAG,CAC7CZ,QAAQK,KAAK,YAAaS,eAC1Bb,gBAAgBI,KAAK,QAASS,mBAC1BC,IAAM,GAAKD,cACfD,UAAUG,IAAI,gBACMD,IAAM,WAM9BT,MAAQE,SAAYF,MAASE,QAAU,GAAM,KACzCM,cAAgB,EAChBX,UAAY,IACZW,cAAgBX,UAAY,GAEhCH,QAAQK,KAAK,YAAaS,eAC1Bb,gBAAgBI,KAAK,QAASS,mBAC1BC,IAAM,GAAKD,cACfD,UAAUG,IAAI,gBACMD,IAAM,WAU3BE,CAAUvB"}