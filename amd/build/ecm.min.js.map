{"version":3,"file":"ecm.min.js","sources":["../src/ecm.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AMD module\n *\n * @copyright  2024 https://santoshmagar.com.np/\n * @author     santoshtmp7 https://github.com/santoshtmp/moodle-local_easycustmenu\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n */\nimport Templates from 'core/templates';\n\n/**\n *\n * @param {*} templatecontext\n */\nexport const admin_plugin_setting_init = (templatecontext) => {\n    /**\n    * adjust the setting section\n    */\n    let beforeDiv = \"\";\n    Templates.render('local_easycustmenu/easycustmenu_setting_header', templatecontext)\n        .then(function (html) {\n            beforeDiv = document.querySelector(\"#menu_setting_collection .ecm-header\");\n            if (beforeDiv) {\n                beforeDiv.outerHTML = html;\n            } else {\n                beforeDiv = document.querySelector(\"#page-admin-setting-local_easycustmenu #adminsettings .settingsform > h2\");\n                if (beforeDiv) {\n                    beforeDiv.outerHTML = html;\n                }\n            }\n        });\n};\n\n/**\n *\n * @param {*} link\n * @param {*} label\n * @param {*} css_class\n * @returns\n */\nfunction get_ecm_btn(link, label, css_class = '') {\n    let btn = '<a href=\"' + link + '\" class=\"btn btn-secondary btn-manage-ecm ';\n    btn += css_class + ' \" style=\"margin:8px;\">' + label + '</a>';\n    btn = new DOMParser().parseFromString(btn, 'text/html');\n    return btn.querySelector('a.btn-manage-ecm');\n\n}\n\n/**\n *\n * @param {*} string_array\n */\nexport const admin_core_setting_init = (string_array) => {\n\n    let navmenu_link = \"/local/easycustmenu/edit.php?type=navmenu\";\n    let usermenu_link = \"/local/easycustmenu/edit.php?type=usermenu\";\n    /**\n    * core custommenuitems\n    */\n    let btn_ecm_custommenuitems = get_ecm_btn(navmenu_link, string_array['manage_menu_label']);\n    var show_menu_label = string_array['show_menu_label']; //'Show Default \"Custom menu items\" ';\n    var hide_menu_label = string_array['hide_menu_label']; //'Hide Default \"Custom menu items\" ';\n    let btn_hide_show_custommenuitems = get_ecm_btn('#', show_menu_label, 'show_hide_custommenuitems show_menu');\n    if (document.querySelector(\"#admin-custommenuitems > .form-setting \")) {\n        document.querySelector(\"#admin-custommenuitems > .form-setting \").prepend(btn_ecm_custommenuitems);\n        document.querySelector(\"#admin-custommenuitems > .form-setting \").prepend(btn_hide_show_custommenuitems);\n        document.querySelector(\"#admin-custommenuitems > .form-setting .form-textarea\").style.display = \"none\";\n        document.querySelector(\"#admin-custommenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n        document.querySelector(\"#admin-custommenuitems > .form-setting .form-description \").style.display = \"none\";\n\n        var element_show_hide = document.querySelector(\"#admin-custommenuitems > .form-setting a.show_hide_custommenuitems\");\n        element_show_hide.addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n            if (element_show_hide.classList.contains(\"show_menu\")) {\n                element_show_hide.classList.remove(\"show_menu\");\n                element_show_hide.classList.add(\"hide_menu\");\n                element_show_hide.textContent = hide_menu_label;\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-textarea\").style.display = \"block\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-defaultinfo \").style.display = \"block\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-description \").style.display = \"block\";\n            } else {\n                element_show_hide.classList.remove(\"hide_menu\");\n                element_show_hide.classList.add(\"show_menu\");\n                element_show_hide.textContent = show_menu_label;\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-textarea\").style.display = \"none\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-description \").style.display = \"none\";\n            }\n        });\n    }\n\n    /** core customusermenuitems */\n    let btn_ecm_customusermenuitems = get_ecm_btn(usermenu_link, string_array['manage_menu_label_2']);\n    var show_menu_label_2 = string_array['show_menu_label_2'];\n    var hide_menu_label_2 = string_array['hide_menu_label_2'];\n    let btn_hide_show_customusermenuitems = get_ecm_btn('#', show_menu_label_2, 'show_hide_customusermenuitems show_menu');\n\n    if (document.querySelector(\"#admin-customusermenuitems > .form-setting \")) {\n        document.querySelector(\"#admin-customusermenuitems > .form-setting \").prepend(btn_ecm_customusermenuitems);\n        document.querySelector(\"#admin-customusermenuitems > .form-setting \").prepend(btn_hide_show_customusermenuitems);\n        document.querySelector(\"#admin-customusermenuitems > .form-setting .form-textarea\").style.display = \"none\";\n        document.querySelector(\"#admin-customusermenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n        document.querySelector(\"#admin-customusermenuitems > .form-setting .form-description \").style.display = \"none\";\n\n        var element_show_hide_2 = document.querySelector(\"#admin-customusermenuitems  a.show_hide_customusermenuitems\");\n        element_show_hide_2.addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n            if (element_show_hide_2.classList.contains(\"show_menu\")) {\n                element_show_hide_2.classList.remove(\"show_menu\");\n                element_show_hide_2.classList.add(\"hide_menu\");\n                element_show_hide_2.textContent = hide_menu_label_2;\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-textarea\").style.display = \"block\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-defaultinfo \").style.display = \"block\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-description \").style.display = \"block\";\n            } else {\n                element_show_hide_2.classList.remove(\"hide_menu\");\n                element_show_hide_2.classList.add(\"show_menu\");\n                element_show_hide_2.textContent = show_menu_label_2;\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-textarea\").style.display = \"none\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-description \").style.display = \"none\";\n\n            }\n        });\n    }\n};"],"names":["get_ecm_btn","link","label","css_class","btn","DOMParser","parseFromString","querySelector","templatecontext","beforeDiv","render","then","html","document","outerHTML","string_array","btn_ecm_custommenuitems","show_menu_label","hide_menu_label","btn_hide_show_custommenuitems","prepend","style","display","element_show_hide","addEventListener","e","stopPropagation","preventDefault","classList","contains","remove","add","textContent","btn_ecm_customusermenuitems","show_menu_label_2","hide_menu_label_2","btn_hide_show_customusermenuitems","element_show_hide_2"],"mappings":";;;;;;;;+MAuDSA,YAAYC,KAAMC,WAAOC,iEAAY,GACtCC,IAAM,YAAcH,KAAO,oDAC/BG,KAAOD,UAAY,0BAA4BD,MAAQ,OACvDE,KAAM,IAAIC,WAAYC,gBAAgBF,IAAK,aACpCA,IAAIG,cAAc,uDA9BaC,sBAIlCC,UAAY,sBACNC,OAAO,iDAAkDF,iBAC9DG,MAAK,SAAUC,MACZH,UAAYI,SAASN,cAAc,wCAC/BE,UACAA,UAAUK,UAAYF,MAEtBH,UAAYI,SAASN,cAAc,4EAC/BE,YACAA,UAAUK,UAAYF,4CAyBFG,mBAOhCC,wBAA0BhB,YALX,4CAKqCe,aAAY,uBAChEE,gBAAkBF,aAAY,gBAC9BG,gBAAkBH,aAAY,oBAC9BI,8BAAgCnB,YAAY,IAAKiB,gBAAiB,0CAClEJ,SAASN,cAAc,2CAA4C,CACnEM,SAASN,cAAc,2CAA2Ca,QAAQJ,yBAC1EH,SAASN,cAAc,2CAA2Ca,QAAQD,+BAC1EN,SAASN,cAAc,yDAAyDc,MAAMC,QAAU,OAChGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,OACpGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,WAEhGC,kBAAoBV,SAASN,cAAc,sEAC/CgB,kBAAkBC,iBAAiB,SAAS,SAAUC,GAClDA,EAAEC,kBACFD,EAAEE,iBACEJ,kBAAkBK,UAAUC,SAAS,cACrCN,kBAAkBK,UAAUE,OAAO,aACnCP,kBAAkBK,UAAUG,IAAI,aAChCR,kBAAkBS,YAAcd,gBAChCL,SAASN,cAAc,yDAAyDc,MAAMC,QAAU,QAChGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,QACpGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,UAEpGC,kBAAkBK,UAAUE,OAAO,aACnCP,kBAAkBK,UAAUG,IAAI,aAChCR,kBAAkBS,YAAcf,gBAChCJ,SAASN,cAAc,yDAAyDc,MAAMC,QAAU,OAChGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,OACpGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,eAM5GW,4BAA8BjC,YAtCd,6CAsCyCe,aAAY,yBACrEmB,kBAAoBnB,aAAY,kBAChCoB,kBAAoBpB,aAAY,sBAChCqB,kCAAoCpC,YAAY,IAAKkC,kBAAmB,8CAExErB,SAASN,cAAc,+CAAgD,CACvEM,SAASN,cAAc,+CAA+Ca,QAAQa,6BAC9EpB,SAASN,cAAc,+CAA+Ca,QAAQgB,mCAC9EvB,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,OACpGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU,OACxGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU,WAEpGe,oBAAsBxB,SAASN,cAAc,+DACjD8B,oBAAoBb,iBAAiB,SAAS,SAAUC,GACpDA,EAAEC,kBACFD,EAAEE,iBACEU,oBAAoBT,UAAUC,SAAS,cACvCQ,oBAAoBT,UAAUE,OAAO,aACrCO,oBAAoBT,UAAUG,IAAI,aAClCM,oBAAoBL,YAAcG,kBAClCtB,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,QACpGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU,QACxGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU,UAExGe,oBAAoBT,UAAUE,OAAO,aACrCO,oBAAoBT,UAAUG,IAAI,aAClCM,oBAAoBL,YAAcE,kBAClCrB,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,OACpGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU,OACxGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU"}