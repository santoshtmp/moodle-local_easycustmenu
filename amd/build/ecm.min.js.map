{"version":3,"file":"ecm.min.js","sources":["../src/ecm.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AMD module\n *\n * @copyright  2024 https://santoshmagar.com.np/\n * @author     santoshtmp7 https://github.com/santoshtmp/moodle-local_easycustmenu\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n */\nimport Templates from 'core/templates';\n\n/**\n * AdminPluginSettingInit\n * @param {*} templatecontext\n */\nexport const adminPluginSettingInit = (templatecontext) => {\n    // Adjust the setting section.\n    let beforeDiv = \"\";\n    Templates.render('local_easycustmenu/easycustmenu_setting_header', templatecontext)\n        .then(function(html) {\n            beforeDiv = document.querySelector(\"#menu_setting_collection .ecm-header\");\n            if (beforeDiv) {\n                beforeDiv.outerHTML = html;\n            } else {\n                beforeDiv = document.querySelector(\"#page-admin-setting-local_easycustmenu #adminsettings .settingsform > h2\");\n                if (beforeDiv) {\n                    beforeDiv.outerHTML = html;\n                }\n            }\n            return true;\n        })\n        .catch((error) => {\n            window.console.log('Template rendering failed:' + error);\n        });\n};\n\n/**\n * GetEcmBtn\n * @param {*} link\n * @param {*} label\n * @param {*} cssClass\n * @returns\n */\nfunction getEcmBtn(link, label, cssClass = '') {\n    let btn = '<a href=\"' + link + '\" class=\"btn btn-secondary btn-manage-ecm ';\n    btn += cssClass + ' \" style=\"margin:8px;\">' + label + '</a>';\n    btn = new DOMParser().parseFromString(btn, 'text/html');\n    return btn.querySelector('a.btn-manage-ecm');\n\n}\n\n/**\n * AdminCoreSettingInit\n * @param {*} jsdata\n */\nexport const adminCoreSettingInit = (jsdata) => {\n    // Core custommenuitems.\n    if (document.querySelector(\"#admin-custommenuitems > .form-setting \")) {\n        document.querySelector(\"#admin-custommenuitems > .form-setting \").prepend(\n            getEcmBtn(jsdata.manageNavMenuLink, jsdata.managenavmenulabel)\n        );\n    }\n\n    // Core customusermenuitems.\n    if (document.querySelector(\"#admin-customusermenuitems > .form-setting \")) {\n        document.querySelector(\"#admin-customusermenuitems > .form-setting \").prepend(\n            getEcmBtn(jsdata.manageUserMenuLink, jsdata.manageusermenulabel)\n        );\n    }\n};"],"names":["getEcmBtn","link","label","cssClass","btn","DOMParser","parseFromString","querySelector","templatecontext","beforeDiv","render","then","html","document","outerHTML","catch","error","window","console","log","jsdata","prepend","manageNavMenuLink","managenavmenulabel","manageUserMenuLink","manageusermenulabel"],"mappings":";;;;;;;;yMAyDSA,UAAUC,KAAMC,WAAOC,gEAAW,GACnCC,IAAM,YAAcH,KAAO,oDAC/BG,KAAOD,SAAW,0BAA4BD,MAAQ,OACtDE,KAAM,IAAIC,WAAYC,gBAAgBF,IAAK,aACpCA,IAAIG,cAAc,oDAhCUC,sBAE/BC,UAAY,sBACNC,OAAO,iDAAkDF,iBAC9DG,MAAK,SAASC,aACXH,UAAYI,SAASN,cAAc,wCAC/BE,UACAA,UAAUK,UAAYF,MAEtBH,UAAYI,SAASN,cAAc,4EAC/BE,YACAA,UAAUK,UAAYF,QAGvB,KAEVG,OAAOC,QACJC,OAAOC,QAAQC,IAAI,6BAA+BH,yCAuBzBI,SAE7BP,SAASN,cAAc,4CACvBM,SAASN,cAAc,2CAA2Cc,QAC9DrB,UAAUoB,OAAOE,kBAAmBF,OAAOG,qBAK/CV,SAASN,cAAc,gDACvBM,SAASN,cAAc,+CAA+Cc,QAClErB,UAAUoB,OAAOI,mBAAoBJ,OAAOK"}