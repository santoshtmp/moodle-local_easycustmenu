{"version":3,"file":"ecm.min.js","sources":["../src/ecm.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AMD module\n *\n * @copyright  2024 https://santoshmagar.com.np/\n * @author     santoshtmp7 https://github.com/santoshtmp/moodle-local_easycustmenu\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n */\nimport Templates from 'core/templates';\n\n/**\n *\n * @param {*} templatecontext\n */\nexport const admin_plugin_setting_init = (templatecontext) => {\n    /**\n    * adjust the setting section\n    */\n    let beforeDiv = \"\";\n    Templates.render('local_easycustmenu/easycustmenu_setting_header', templatecontext)\n        .then(function(html) {\n            beforeDiv = document.querySelector(\"#menu_setting_collection .ecm-header\");\n            if (beforeDiv) {\n                beforeDiv.outerHTML = html;\n            } else {\n                beforeDiv = document.querySelector(\"#page-admin-setting-local_easycustmenu #adminsettings .settingsform > h2\");\n                if (beforeDiv) {\n                    beforeDiv.outerHTML = html;\n                }\n            }\n        });\n};\n\n/**\n *\n * @param {*} link\n * @param {*} label\n * @param {*} css_class\n * @returns\n */\nfunction get_ecm_btn(link, label, css_class = '') {\n    let btn = '<a href=\"' + link + '\" class=\"btn btn-secondary btn-manage-ecm ';\n    btn += css_class + ' \" style=\"margin:8px;\">' + label + '</a>';\n    btn = new DOMParser().parseFromString(btn, 'text/html');\n    return btn.querySelector('a.btn-manage-ecm');\n\n}\n\n/**\n *\n * @param {*} string_array\n */\nexport const admin_core_setting_init = (string_array) => {\n\n    let navmenuLink = \"/local/easycustmenu/edit.php?type=navmenu\";\n    let usermenuLink = \"/local/easycustmenu/edit.php?type=usermenu\";\n    /**\n    * core custommenuitems\n    */\n    let btnecmcustommenuitems = get_ecm_btn(navmenuLink, string_array['manage_menu_label']);\n    var showmenulabel = string_array['show_menu_label']; //'Show Default \"Custom menu items\" ';\n    var hidemenulabel = string_array['hide_menu_label']; //'Hide Default \"Custom menu items\" ';\n    let btn_hide_show_custommenuitems = get_ecm_btn('#', showmenulabel, 'show_hide_custommenuitems show_menu');\n    if (document.querySelector(\"#admin-custommenuitems > .form-setting \")) {\n        document.querySelector(\"#admin-custommenuitems > .form-setting \").prepend(btnecmcustommenuitems);\n        document.querySelector(\"#admin-custommenuitems > .form-setting \").prepend(btn_hide_show_custommenuitems);\n        document.querySelector(\"#admin-custommenuitems > .form-setting .form-textarea\").style.display = \"none\";\n        document.querySelector(\"#admin-custommenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n        document.querySelector(\"#admin-custommenuitems > .form-setting .form-description \").style.display = \"none\";\n\n        var elementShowHide = document.querySelector(\"#admin-custommenuitems > .form-setting a.show_hide_custommenuitems\");\n        elementShowHide.addEventListener(\"click\", function(e) {\n            e.stopPropagation();\n            e.preventDefault();\n            if (elementShowHide.classList.contains(\"show_menu\")) {\n                elementShowHide.classList.remove(\"show_menu\");\n                elementShowHide.classList.add(\"hide_menu\");\n                elementShowHide.textContent = hidemenulabel;\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-textarea\").style.display = \"block\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-defaultinfo \").style.display = \"block\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-description \").style.display = \"block\";\n            } else {\n                elementShowHide.classList.remove(\"hide_menu\");\n                elementShowHide.classList.add(\"show_menu\");\n                elementShowHide.textContent = showmenulabel;\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-textarea\").style.display = \"none\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-description \").style.display = \"none\";\n            }\n        });\n    }\n\n    /** core customusermenuitems */\n    let btnecmcustomusermenuitems = get_ecm_btn(usermenuLink, string_array['manage_menu_label_2']);\n    var showmenulabel2 = string_array['show_menu_label_2'];\n    var hidemenulabel2 = string_array['hide_menu_label_2'];\n    let btnhideshowcustomusermenuitems = get_ecm_btn('#', showmenulabel2, 'show_hide_customusermenuitems show_menu');\n\n    if (document.querySelector(\"#admin-customusermenuitems > .form-setting \")) {\n        document.querySelector(\"#admin-customusermenuitems > .form-setting \").prepend(btnecmcustomusermenuitems);\n        document.querySelector(\"#admin-customusermenuitems > .form-setting \").prepend(btnhideshowcustomusermenuitems);\n        document.querySelector(\"#admin-customusermenuitems > .form-setting .form-textarea\").style.display = \"none\";\n        document.querySelector(\"#admin-customusermenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n        document.querySelector(\"#admin-customusermenuitems > .form-setting .form-description \").style.display = \"none\";\n\n        var elementshowhide2 = document.querySelector(\"#admin-customusermenuitems  a.show_hide_customusermenuitems\");\n        elementshowhide2.addEventListener(\"click\", function(e) {\n            e.stopPropagation();\n            e.preventDefault();\n            if (elementshowhide2.classList.contains(\"show_menu\")) {\n                elementshowhide2.classList.remove(\"show_menu\");\n                elementshowhide2.classList.add(\"hide_menu\");\n                elementshowhide2.textContent = hidemenulabel2;\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-textarea\").style.display = \"block\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-defaultinfo \").style.display = \"block\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-description \").style.display = \"block\";\n            } else {\n                elementshowhide2.classList.remove(\"hide_menu\");\n                elementshowhide2.classList.add(\"show_menu\");\n                elementshowhide2.textContent = showmenulabel2;\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-textarea\").style.display = \"none\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-description \").style.display = \"none\";\n\n            }\n        });\n    }\n};"],"names":["get_ecm_btn","link","label","css_class","btn","DOMParser","parseFromString","querySelector","templatecontext","beforeDiv","render","then","html","document","outerHTML","string_array","btnecmcustommenuitems","showmenulabel","hidemenulabel","btn_hide_show_custommenuitems","prepend","style","display","elementShowHide","addEventListener","e","stopPropagation","preventDefault","classList","contains","remove","add","textContent","btnecmcustomusermenuitems","showmenulabel2","hidemenulabel2","btnhideshowcustomusermenuitems","elementshowhide2"],"mappings":";;;;;;;;+MAuDSA,YAAYC,KAAMC,WAAOC,iEAAY,GACtCC,IAAM,YAAcH,KAAO,oDAC/BG,KAAOD,UAAY,0BAA4BD,MAAQ,OACvDE,KAAM,IAAIC,WAAYC,gBAAgBF,IAAK,aACpCA,IAAIG,cAAc,uDA9BaC,sBAIlCC,UAAY,sBACNC,OAAO,iDAAkDF,iBAC9DG,MAAK,SAASC,MACXH,UAAYI,SAASN,cAAc,wCAC/BE,UACAA,UAAUK,UAAYF,MAEtBH,UAAYI,SAASN,cAAc,4EAC/BE,YACAA,UAAUK,UAAYF,4CAyBFG,mBAOhCC,sBAAwBhB,YALV,4CAKmCe,aAAY,uBAC7DE,cAAgBF,aAAY,gBAC5BG,cAAgBH,aAAY,oBAC5BI,8BAAgCnB,YAAY,IAAKiB,cAAe,0CAChEJ,SAASN,cAAc,2CAA4C,CACnEM,SAASN,cAAc,2CAA2Ca,QAAQJ,uBAC1EH,SAASN,cAAc,2CAA2Ca,QAAQD,+BAC1EN,SAASN,cAAc,yDAAyDc,MAAMC,QAAU,OAChGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,OACpGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,WAEhGC,gBAAkBV,SAASN,cAAc,sEAC7CgB,gBAAgBC,iBAAiB,SAAS,SAASC,GAC/CA,EAAEC,kBACFD,EAAEE,iBACEJ,gBAAgBK,UAAUC,SAAS,cACnCN,gBAAgBK,UAAUE,OAAO,aACjCP,gBAAgBK,UAAUG,IAAI,aAC9BR,gBAAgBS,YAAcd,cAC9BL,SAASN,cAAc,yDAAyDc,MAAMC,QAAU,QAChGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,QACpGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,UAEpGC,gBAAgBK,UAAUE,OAAO,aACjCP,gBAAgBK,UAAUG,IAAI,aAC9BR,gBAAgBS,YAAcf,cAC9BJ,SAASN,cAAc,yDAAyDc,MAAMC,QAAU,OAChGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,OACpGT,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,eAM5GW,0BAA4BjC,YAtCb,6CAsCuCe,aAAY,yBAClEmB,eAAiBnB,aAAY,kBAC7BoB,eAAiBpB,aAAY,sBAC7BqB,+BAAiCpC,YAAY,IAAKkC,eAAgB,8CAElErB,SAASN,cAAc,+CAAgD,CACvEM,SAASN,cAAc,+CAA+Ca,QAAQa,2BAC9EpB,SAASN,cAAc,+CAA+Ca,QAAQgB,gCAC9EvB,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,OACpGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU,OACxGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU,WAEpGe,iBAAmBxB,SAASN,cAAc,+DAC9C8B,iBAAiBb,iBAAiB,SAAS,SAASC,GAChDA,EAAEC,kBACFD,EAAEE,iBACEU,iBAAiBT,UAAUC,SAAS,cACpCQ,iBAAiBT,UAAUE,OAAO,aAClCO,iBAAiBT,UAAUG,IAAI,aAC/BM,iBAAiBL,YAAcG,eAC/BtB,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,QACpGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU,QACxGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU,UAExGe,iBAAiBT,UAAUE,OAAO,aAClCO,iBAAiBT,UAAUG,IAAI,aAC/BM,iBAAiBL,YAAcE,eAC/BrB,SAASN,cAAc,6DAA6Dc,MAAMC,QAAU,OACpGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU,OACxGT,SAASN,cAAc,iEAAiEc,MAAMC,QAAU"}