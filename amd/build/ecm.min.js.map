{"version":3,"file":"ecm.min.js","sources":["../src/ecm.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AMD module\n *\n * @copyright  2024 https://santoshmagar.com.np/\n * @author     santoshtmp7 https://github.com/santoshtmp/moodle-local_easycustmenu\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n */\n// import $ from 'jquery';\n\n\n/**\n *\n * @param {*} target_blank_menu\n */\nexport const target_blank_menu = (target_blank_menu) => {\n    if (target_blank_menu) {\n        let target_blank_on_menu = JSON.parse(target_blank_menu);\n        Object.entries(target_blank_on_menu).forEach(([key, value]) => {\n            let label = `${key}`;\n            let link = `${value}`;\n            if (link) {\n                let menu_item = document.querySelectorAll(\"nav ul li a[href$='\" + link + \"']\");\n                menu_item.forEach(item => {\n                    if (item.textContent.trim() == label) {\n                        item.setAttribute(\"target\", \"_blank\");\n                    }\n                });\n            }\n        });\n    }\n};\n\n/**\n *\n * @param {*} plugin_header_content\n */\nexport const admin_plugin_setting_init = (plugin_header_content) => {\n    /**\n    * adjust the setting section\n    */\n    let beforeDiv = \"\";\n    beforeDiv = document.querySelector(\"#menu_setting_collection .ecm-header\");\n    if (beforeDiv) {\n        beforeDiv.outerHTML = plugin_header_content;\n    } else {\n        beforeDiv = document.querySelector(\"#page-admin-setting-local_easycustmenu #adminsettings .settingsform > h2\");\n        if (beforeDiv) {\n            beforeDiv.outerHTML = plugin_header_content;\n        }\n    }\n\n};\n\n\n/**\n *\n * @param {*} string_array\n */\nexport const admin_core_setting_init = (string_array) => {\n\n    window.console.log(string_array);\n    /**\n     *\n     * @param {*} link\n     * @param {*} label\n     * @param {*} css_class\n     * @returns\n     */\n    function get_ecm_btn(link, label, css_class = '') {\n        let btn = '<a href=\"' + link + '\" class=\"btn btn-secondary btn-manage-ecm ';\n        btn += css_class + ' \" style=\"margin:8px;\">' + label + '</a>';\n        btn = new DOMParser().parseFromString(btn, 'text/html');\n        return btn.querySelector('a.btn-manage-ecm');\n\n    }\n\n    /**\n    * core custommenuitems\n    */\n    let btn_ecm_custommenuitems = get_ecm_btn(\"/local/easycustmenu/pages/navmenu.php\", string_array['manage_menu_label']);\n    var show_menu_label = string_array['show_menu_label']; //'Show Default \"Custom menu items\" ';\n    var hide_menu_label = string_array['hide_menu_label']; //'Hide Default \"Custom menu items\" ';\n    let btn_hide_show_custommenuitems = get_ecm_btn('#', show_menu_label, 'show_hide_custommenuitems show_menu');\n    if (document.querySelector(\"#admin-custommenuitems > .form-setting \")) {\n        document.querySelector(\"#admin-custommenuitems > .form-setting \").prepend(btn_ecm_custommenuitems);\n        document.querySelector(\"#admin-custommenuitems > .form-setting \").prepend(btn_hide_show_custommenuitems);\n        document.querySelector(\"#admin-custommenuitems > .form-setting .form-textarea\").style.display = \"none\";\n        document.querySelector(\"#admin-custommenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n        document.querySelector(\"#admin-custommenuitems > .form-setting .form-description \").style.display = \"none\";\n\n        var element_show_hide = document.querySelector(\"#admin-custommenuitems > .form-setting a.show_hide_custommenuitems\");\n        element_show_hide.addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n            if (element_show_hide.classList.contains(\"show_menu\")) {\n                element_show_hide.classList.remove(\"show_menu\");\n                element_show_hide.classList.add(\"hide_menu\");\n                element_show_hide.textContent = hide_menu_label;\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-textarea\").style.display = \"block\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-defaultinfo \").style.display = \"block\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-description \").style.display = \"block\";\n            } else {\n                element_show_hide.classList.remove(\"hide_menu\");\n                element_show_hide.classList.add(\"show_menu\");\n                element_show_hide.textContent = show_menu_label;\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-textarea\").style.display = \"none\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n                document.querySelector(\"#admin-custommenuitems > .form-setting .form-description \").style.display = \"none\";\n            }\n        });\n    }\n\n\n    /** core customusermenuitems */\n    let btn_ecm_customusermenuitems = get_ecm_btn(\"/local/easycustmenu/pages/usermenu.php\", string_array['manage_menu_label_2']);\n    var show_menu_label_2 = string_array['show_menu_label_2'];\n    var hide_menu_label_2 = string_array['hide_menu_label_2'];\n    let btn_hide_show_customusermenuitems = get_ecm_btn('#', show_menu_label_2, 'show_hide_customusermenuitems show_menu');\n\n    if (document.querySelector(\"#admin-customusermenuitems > .form-setting \")) {\n        document.querySelector(\"#admin-customusermenuitems > .form-setting \").prepend(btn_ecm_customusermenuitems);\n        document.querySelector(\"#admin-customusermenuitems > .form-setting \").prepend(btn_hide_show_customusermenuitems);\n        document.querySelector(\"#admin-customusermenuitems > .form-setting .form-textarea\").style.display = \"none\";\n        document.querySelector(\"#admin-customusermenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n        document.querySelector(\"#admin-customusermenuitems > .form-setting .form-description \").style.display = \"none\";\n\n        var element_show_hide_2 = document.querySelector(\"#admin-customusermenuitems  a.show_hide_customusermenuitems\");\n        element_show_hide_2.addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n            if (element_show_hide_2.classList.contains(\"show_menu\")) {\n                element_show_hide_2.classList.remove(\"show_menu\");\n                element_show_hide_2.classList.add(\"hide_menu\");\n                element_show_hide_2.textContent = hide_menu_label_2;\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-textarea\").style.display = \"block\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-defaultinfo \").style.display = \"block\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-description \").style.display = \"block\";\n            } else {\n                element_show_hide_2.classList.remove(\"hide_menu\");\n                element_show_hide_2.classList.add(\"show_menu\");\n                element_show_hide_2.textContent = show_menu_label_2;\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-textarea\").style.display = \"none\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-defaultinfo \").style.display = \"none\";\n                document.querySelector(\"#admin-customusermenuitems > .form-setting .form-description \").style.display = \"none\";\n\n            }\n        });\n    }\n};"],"names":["target_blank_menu","target_blank_on_menu","JSON","parse","Object","entries","forEach","_ref","key","value","label","link","document","querySelectorAll","item","textContent","trim","setAttribute","plugin_header_content","beforeDiv","querySelector","outerHTML","string_array","get_ecm_btn","css_class","btn","DOMParser","parseFromString","window","console","log","btn_ecm_custommenuitems","show_menu_label","hide_menu_label","btn_hide_show_custommenuitems","prepend","style","display","element_show_hide","addEventListener","e","stopPropagation","preventDefault","classList","contains","remove","add","btn_ecm_customusermenuitems","show_menu_label_2","hide_menu_label_2","btn_hide_show_customusermenuitems","element_show_hide_2"],"mappings":"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"}